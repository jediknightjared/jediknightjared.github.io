<!DOCTYPE html>
<html>
	<head>
		<title> Level 1 </title>
		<link rel="stylesheet" type="text/css" href="https://jediknightjared.github.io/main.css">
		<script src="https://simplycoding.org/files/simplyjs/simply.js"></script>
		<script>
			function start(){
				sjs.open("target",800,500);

				var background = new sjs.Image("Images/background.png"); 
				background.setSize(2500, 500); 
				
				//Bottom
				var bottom = new sjs.Image("Images/background.png");
				bottom.setSize(2500, 1);
				bottom.type = "bottom";
				bottom.bottom();
				
				//Menu
				var menu = new sjs.Image("Images/menu.png")
				menu.node.onclick = function() {
					window.location = "index.html";
				};
				menu.offset(10,10);
				
				sjs.loadImageArray('[{"width":136,"height":30,"x":155,"y":381,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":376,"y":278,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":582,"y":198,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":827.4411425000296,"y":197,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","type":"platform","friction":0.05,"classType":"Image"}]');
				
				
				//Player Properties
				var player = new sjs.Image("Images/r_idle.png");
				player.type = "player";
				player.setSize(85,94);
				player.setHFlipImages('Images/l_idle.png', 'Images/r_idle.png');
				player.setGravity();
				player.friction = 0.3;
				player.bottom();
				player.faceRight();
				
				//Player movement controls
				var r_walk = 1;
				var r_facing = true;
				sjs.keyDown(RIGHT_KEY, function() {
					r_facing = true;
					if (r_walk == 1) {
						player.setImage("Images/r_walk-0.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 2;
					} else if (r_walk == 2) {
						player.setImage("Images/r_walk-1.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 3;
					} else if (r_walk == 3) {
						player.setImage("Images/r_walk-2.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 4;
					} else if (r_walk == 4) {
						player.setImage("Images/r_walk-3.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 5;
					} else if (r_walk == 5) {
						player.setImage("Images/r_walk-4.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 6;
					} else if (r_walk == 6) {
						player.setImage("Images/r_walk-5.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 7;
					} else if (r_walk == 7) {
						player.setImage("Images/r_walk-6.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 8;
					} else if (r_walk == 8) {
						player.setImage("Images/r_walk-7.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 9;
					} else if (r_walk == 9) {
						player.setImage("Images/r_walk-0.png");
						player.faceRight();
						player.pushRight(1.5);
						r_walk = 1;
					} else {
						player.setImage("Images/r_jump.png");
						player.pushRight(1.5); 
					}

				});


				var l_walk = 1;
				var l_facing = true;
				sjs.keyDown(LEFT_KEY, function() {
					l_facing = true;
					r_facing = false;
					if (l_walk == 1) {
						player.setImage("Images/l_walk-0.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 2;
					} else if (l_walk == 2) {
						player.setImage("Images/l_walk-1.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 3;
					} else if (l_walk == 3) {
						player.setImage("Images/l_walk-2.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 4;
					} else if (l_walk == 4) {
						player.setImage("Images/l_walk-3.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 5;
					} else if (l_walk == 5) {
						player.setImage("Images/l_walk-4.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 6;
					} else if (l_walk == 6) {
						player.setImage("Images/l_walk-5.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 7;
					} else if (l_walk == 7) {
						player.setImage("Images/l_walk-6.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 8;
					} else if (l_walk == 8) {
						player.setImage("Images/l_walk-7.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 9;
					} else if (l_walk == 9) {
						player.setImage("Images/l_walk-0.png");
						player.faceLeft();
						player.pushLeft(1.5);
						l_walk = 1;
					} else {
						player.setImage("Images/l_jump.png");
						player.pushLeft(1.5); 
					}

				});


				//Jumping
				var canJump = true;
				sjs.keyDown(UP_KEY, function() {
					if (canJump) {
						r_walk = 10;
						l_walk = 10;
						canJump = false;
						player.pushUp(45);
						player.setGravity(3);

						if (r_facing) {
							player.setImage("Images/r_jump.png")
						} else {
							player.setImage("Images/l_jump.png")
						}
						
					}

				});

				window.addEventListener("keyup", function(e) {
					if (e.keyCode == RIGHT_KEY) {
						player.setImage("Images/r_idle.png");
						r_walk = 1;
						l_walk = 1;
					} else if (e.keyCode == LEFT_KEY) {
						player.setImage("Images/l_idle.png");
						r_walk = 1;
						l_walk = 1; 
					} //end if statement
				}); //end EventListener function
				
				sjs.onHit("enemy","bottom_screen", function(x,y){
				sjs.stoppedBy(x,y);
			});
			
			sjs.onHit("enemy",["left_screen","right_screen"], function(x,y){
				sjs.bounceOff(x,y);
			});
			
			sjs.onHit("enemy","platform", function(x,y){
				if(x.isAboveOf(y) == true){
					sjs.stoppedBy(x,y); 
				} else {
					sjs.bounceOff(x,y); 
				}
			});
				
				sjs.onHit("player","jump_pad", function(x,y){
				if(x.isAboveOf(y) == true){
					player.pushUp(50); 
				} else {
					sjs.stoppedBy(x,y); 
				}
			});
			
			sjs.onHit("trash",["platform","jump_pad", "powerUp","score","enemy","flag"], function(x,y){
				y.destroy();
				sjs.removeFromArray(level,y);
			});

				//Collide with platforms
				sjs.onHit("player","platform", function(x,y){
					r_walk = 1;
					l_walk = 1;
					canJump = true;
					if (r_facing) {
						player.setImage("Images/r_idle.png");

					} else {
						player.setImage("Images/l_idle.png");
					}
					sjs.stoppedBy(x,y);
				});

				//Collide bottom
				sjs.onHit("player","bottom", function(x,y){
					r_walk = 1;
					l_walk = 1;
					canJump = true;
					if (r_facing) {
						player.setImage("Images/r_idle.png");
						
					} else {
						player.setImage("Images/l_idle.png");
					}
					
				});
				
				//Make the player control the camera
				sjs.scrollable(player,background);
				
			}
		</script>
	</head>
	<body onload="start()">
		<div id="nav">
		<img src="https://jediknightjared.github.io/Images/Logo.png" id="logo">
		</div>
		<div id="mainBody">
		
		
		<h1> Platform Game Level 1</h1>

		<div id="target" style="margin:auto;background:grey;"></div>
		</div>
	</body>
</html>